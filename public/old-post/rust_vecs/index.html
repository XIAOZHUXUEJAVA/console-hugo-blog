<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>littlepig/old-post/rust_vecs/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://xxxdgblog.github.io/hugo-theme-console/css/terminal-0.7.2.min.css">
    <link rel="stylesheet" href="https://xxxdgblog.github.io/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="https://xxxdgblog.github.io/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="Rustlings-Vecs" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xxxdgblog.github.io/old-post/rust_vecs/" /><meta property="article:published_time" content="2023-02-20T00:00:00+00:00" />



<meta name="twitter:title" content="Rustlings-Vecs"/>
<meta name="twitter:description" content="Learn Rust (Just For Fun)"/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://xxxdgblog.github.io/" class="no-style site-name">littlepig</a>:~# 
              <a href='https://xxxdgblog.github.io/old-post'>old-post</a>/<a href='https://xxxdgblog.github.io/old-post/rust_vecs'>rust_vecs</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="https://xxxdgblog.github.io/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="https://xxxdgblog.github.io/posts/" typeof="ListItem">posts/</a></li>
                
                <li><a href="https://xxxdgblog.github.io/photos/" typeof="ListItem">photos/</a></li>
                
                <li><a href="https://xxxdgblog.github.io/old-post/" typeof="ListItem">old-post/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>Rustlings-Vecs</h1>
<h1 id="rustlings-vecs">Rustlings-Vecs</h1>
<p>The <code>vec!</code> macro is a convenient shortcut for creating variables of type <code>Vec</code> and initialize their elements.</p>
<h2 id="vecs1rs">vecs1.rs</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">array_and_vec</span>() -&gt; ([<span style="color:#66d9ef">i32</span>; <span style="color:#ae81ff">4</span>], Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>]; <span style="color:#75715e">// a plain array
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> v <span style="color:#f92672">=</span> vec![<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>];<span style="color:#75715e">// TODO: declare your vector here with the macro for vectors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// to return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    (a, v)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[cfg(test)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">mod</span> tests {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> <span style="color:#66d9ef">super</span>::<span style="color:#f92672">*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#[test]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_array_and_vec_similarity</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> (a, v) <span style="color:#f92672">=</span> array_and_vec();
</span></span><span style="display:flex;"><span>        assert_eq!(a, v[<span style="color:#f92672">..</span>]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="vecs2rs">vecs2.rs</h2>
<p>Both of the two functions have the same purpose of multiplying each element in the vector by 2 and return a vector.</p>
<p>However, <code>vec_loop</code> directly modifies the input vector, while <code>vec_map</code> returns a new vector with modified elements.</p>
<p>Why we use <code>*i = *i * 2</code> ?</p>
<p>In this code, the input parameter <code>v</code> of the <code>vec_loop</code> function if defined as a mutable <code>Vec&lt;i32&gt;</code> type, which means that the function can modify the vector internally. Specifically, we use <code>iter_mut()</code> method to obtain a mutable iterator of the vector <code>v</code>, iterate over each element in the vector, and use the dereference operator <code>*</code> to read the value of each element, multiply it by 2, and assign it back to the original element.</p>
<p>The function returns the updated original vector <code>v</code>. Because <code>v</code> is mutable, the function can directly modify its elements without creating a new vector. This avoid the overhead of memory allocation and copying, improving the performance of the code.</p>
<p>The code defines a function named <code>vec_map</code> which takes a reference to a <code>Vec&lt;i32&gt;</code> vector as its input parameter <code>v</code>. The vector is read-only, meaning that it can not be modified inside the function. In the function , we use the <code>iter()</code> method to obtain the iterator over the elements of the vector<code>v</code>, and apply each element to an anonymous function <code>|num| { return num *2 }</code> using the <code>map() </code> method. This function multiplies each element by 2 and return a new element. Finally, we use the <code>collect()</code> method to collect all the new elements into a new vector.</p>
<p>It is important to note that, unlike the <code>vec_loop</code> function, we do not modify the original vector <code>v</code> directly in the <code>vec_map</code> function. Instead we create a new vector to store and updated values. This is because we are using a read-only reference to the vector <code>v</code> , which prevents us from modifying it directly. So we avoid some side effects that might be caused by modifying the original vector directly.</p>
<p>Overall, the purpose of this code is to multiply each element of the input vector <code>v</code> by 2 and return a new vector with the updated values. Unlike <code>vec_loop</code>, <code>vec_map</code> does not modify the original vector, but instead returns a new one.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">vec_loop</span>(<span style="color:#66d9ef">mut</span> v: Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span>) -&gt; Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> v.iter_mut() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Fill this up so that each element in the Vec `v` is
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// multiplied by 2.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#f92672">*</span>i <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// At this point, `v` should be equal to [4, 8, 12, 16, 20].
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    v
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">vec_map</span>(v: <span style="color:#66d9ef">&amp;</span>Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span>) -&gt; Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    v.iter().map(<span style="color:#f92672">|</span>num<span style="color:#f92672">|</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Do the same thing as above - but instead of mutating the
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// Vec, you can just return the new number!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> num <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    }).collect()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[cfg(test)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">mod</span> tests {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> <span style="color:#66d9ef">super</span>::<span style="color:#f92672">*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#[test]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_vec_loop</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> v: Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>).filter(<span style="color:#f92672">|</span>x<span style="color:#f92672">|</span> x <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>).take(<span style="color:#ae81ff">5</span>).collect();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> ans <span style="color:#f92672">=</span> vec_loop(v.clone());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        assert_eq!(ans, v.iter().map(<span style="color:#f92672">|</span>x<span style="color:#f92672">|</span> x <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>).collect::<span style="color:#f92672">&lt;</span>Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;&gt;</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#[test]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_vec_map</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> v: Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>).filter(<span style="color:#f92672">|</span>x<span style="color:#f92672">|</span> x <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>).take(<span style="color:#ae81ff">5</span>).collect();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> ans <span style="color:#f92672">=</span> vec_map(<span style="color:#f92672">&amp;</span>v);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        assert_eq!(ans, v.iter().map(<span style="color:#f92672">|</span>x<span style="color:#f92672">|</span> x <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>).collect::<span style="color:#f92672">&lt;</span>Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;&gt;</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo + Github Pages</a> 
</div>

    </div>
  </body>
</html>
