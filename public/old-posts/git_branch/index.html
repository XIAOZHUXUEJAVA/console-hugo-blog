<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>littlepig/old-posts/git_branch/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://xxxdgblog.github.io/hugo-theme-console/css/terminal-0.7.2.min.css">
    <link rel="stylesheet" href="https://xxxdgblog.github.io/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="https://xxxdgblog.github.io/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="git分支的使用和如何回滚你的代码" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xxxdgblog.github.io/old-posts/git_branch/" /><meta property="article:published_time" content="2022-12-18T00:00:00+00:00" />



<meta name="twitter:title" content="git分支的使用和如何回滚你的代码"/>
<meta name="twitter:description" content="git branch and roll back your code"/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://xxxdgblog.github.io/" class="no-style site-name">littlepig</a>:~# 
              <a href='https://xxxdgblog.github.io/old-posts'>old-posts</a>/<a href='https://xxxdgblog.github.io/old-posts/git_branch'>git_branch</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="https://xxxdgblog.github.io/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="https://xxxdgblog.github.io/posts/" typeof="ListItem">posts/</a></li>
                
                <li><a href="https://xxxdgblog.github.io/photos/" typeof="ListItem">photos/</a></li>
                
                <li><a href="https://xxxdgblog.github.io/old-posts/" typeof="ListItem">old-posts/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>git分支的使用和如何回滚你的代码</h1>
<h1 id="learn-git-branch-and-roll-back-your-code">Learn git branch and roll back your code</h1>
<h2 id="create-a-new-repository-on-github">Create a new repository on github</h2>
<ul>
<li>new repository</li>
</ul>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181826700.png" alt="image-20221218182610663"></p>
<p>just complete the relevant information of the remote repository and click the button <strong>Create repository</strong></p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181830404.png" alt="image-20221218183012334"></p>
<h2 id="initialize-the-local-repository">Initialize the local repository</h2>
<p>create a local git repository and create a file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># make a dictionary</span>
</span></span><span style="display:flex;"><span>mkdir test
</span></span><span style="display:flex;"><span><span style="color:#75715e"># enter the dir</span>
</span></span><span style="display:flex;"><span>cd test
</span></span><span style="display:flex;"><span><span style="color:#75715e"># initialize a local git repository</span>
</span></span><span style="display:flex;"><span>git init
</span></span><span style="display:flex;"><span><span style="color:#75715e"># create a new file by vim</span>
</span></span><span style="display:flex;"><span>vim lesson1.txt
</span></span></code></pre></div><p>add content to lesson1.txt, just like &ldquo;hello lesson1&rdquo;</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181822349.png" alt="image-20221218182242259"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># put all files in the current dir into version version control</span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span><span style="color:#75715e"># save your changes to the local repository</span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;lesson1&#34;</span>
</span></span></code></pre></div><h2 id="connect-to-remote-repository-on-github-and-push">connect to remote repository on github and push</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># create a new branch named &#34;lesson1&#34;</span>
</span></span><span style="display:flex;"><span>git branch -M lesson1
</span></span><span style="display:flex;"><span><span style="color:#75715e"># connet to remote repo</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># replace xiaozhu with you own github username and replace test with your remote repo name</span>
</span></span><span style="display:flex;"><span>git remote add origin https://github.com/xiaozhu/test.git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># push changes to github</span>
</span></span><span style="display:flex;"><span>git push -u origin lesson1
</span></span></code></pre></div><p>now your github repo have a new branch named &ldquo;lesson1&rdquo;, and in the branch you can find the &ldquo;lesson1.txt&rdquo; that we pushed</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181925285.png" alt="image-20221218192530231"></p>
<h2 id="new-a-branch">new a branch</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># create a new file named &#34;lesson2.txt&#34; and add content to it</span>
</span></span><span style="display:flex;"><span>vim lesson2.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;lesson2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># new a branch</span>
</span></span><span style="display:flex;"><span>git branch -M lesson2
</span></span><span style="display:flex;"><span>git push -u origin lesson2
</span></span></code></pre></div><p>now we can see that two branches on our github, lesson1 and lesson2</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181935458.png" alt="image-20221218193503415"></p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181941882.png" alt="image-20221218194136842"></p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181942428.png" alt="image-20221218194215389"></p>
<h2 id="roll-back">roll back</h2>
<p>firstly, we can change branch into &ldquo;lesson1&rdquo;, and use the following commad</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#  change branch into &#34;lesson1&#34;</span>
</span></span><span style="display:flex;"><span>git checkout lesson1
</span></span></code></pre></div><p>you can modify the file &ldquo;lesson1.txt&rdquo;</p>
<p>before</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181959642.png" alt="image-20221218195916592"></p>
<p>after</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212181958761.png" alt="image-20221218195811720"></p>
<p>We were looking at a bug today. The version of the previous branch was normal. We added a lot of logs to the new branch and couldn’t find the reason. We hope to go back to the previous version , but we don’t want to save now changes(you have modified some code) to the local repository, and don&rsquo;t want to see the current modified version on Git. <strong>So we can use the following commands.</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git stash
</span></span><span style="display:flex;"><span>git pull
</span></span><span style="display:flex;"><span><span style="color:#75715e"># or</span>
</span></span><span style="display:flex;"><span>git pull origin lesson1
</span></span></code></pre></div><p>now we open &ldquo;lesson1.txt&rdquo; and find our modifications are gone</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212182002525.png" alt="image-20221218200249488"></p>
<p>If we have saved changes to the local repository, just like this:</p>
<p>modify the &ldquo;lesson.txt&rdquo; file</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212182007680.png" alt="image-20221218200736629"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git add lesson1.txt
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;test commit roll back&#34;</span>
</span></span><span style="display:flex;"><span>git push
</span></span></code></pre></div><p>now we want to roll back the version before our modified the &ldquo;lesson1.txt&rdquo;, we can use the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># find the commit id that we want to roll back</span>
</span></span><span style="display:flex;"><span>git log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># roll back</span>
</span></span><span style="display:flex;"><span>git reset --hard commitId
</span></span></code></pre></div><p>we can open the &ldquo;lesson1.txt&rdquo;</p>
<p><img src="https://raw.githubusercontent.com/XIAOZHUXUEJAVA/GraphBed/main/img/202212182019026.png" alt="image-20221218201928990"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># roll back the previous version</span>
</span></span><span style="display:flex;"><span>git reset --hard HEAD^
</span></span><span style="display:flex;"><span><span style="color:#75715e"># roll back two version</span>
</span></span><span style="display:flex;"><span>git reset --hard HEAD^^
</span></span><span style="display:flex;"><span><span style="color:#75715e"># roll back three version</span>
</span></span><span style="display:flex;"><span>git reset --hard HEAD^^^
</span></span></code></pre></div>

        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo + Github Pages</a> 
</div>

    </div>
  </body>
</html>
